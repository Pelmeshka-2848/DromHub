<Page
    x:Class="DromHub.Views.BrandDetailsOverviewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:DromHub.Converters"
    xmlns:local="using:DromHub.Views">

    <Page.Resources>
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorSecondaryBrush}"/>
        </Style>
        <Style x:Key="StatPill" TargetType="Border">
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
        </Style>
        <converters:BrandMarkupBadgeConverter x:Key="MarkupPctToBadgeConverter"/>
        <converters:BrandMarkupBadgeTooltipConverter x:Key="MarkupPctToTooltipConverter"/>
    </Page.Resources>

    <Border Style="{StaticResource Card}">
        <StackPanel Spacing="12">
            <TextBlock Text="Краткая статистика" Style="{ThemeResource SubtitleTextBlockStyle}"/>

            <Grid ColumnSpacing="12" RowSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <!-- Детали -->
                <Border Grid.Column="0" Style="{StaticResource StatPill}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="AllApps"/>
                        <StackPanel>
                            <TextBlock Text="{Binding Parts.Count}" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <TextBlock Text="деталей" Opacity="0.6" FontSize="12"/>
                        </StackPanel>
                    </StackPanel>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Количество запчастей этого бренда"/>
                    </ToolTipService.ToolTip>
                </Border>

                <!-- Синонимы -->
                <Border Grid.Column="1" Style="{StaticResource StatPill}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Link"/>
                        <StackPanel>
                            <TextBlock Text="{Binding Aliases.Count}" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <TextBlock Text="синонимов" Opacity="0.6" FontSize="12"/>
                        </StackPanel>
                    </StackPanel>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Все синонимы (включая основной)"/>
                    </ToolTipService.ToolTip>
                </Border>

                <!-- Наценка -->
                <Border Grid.Column="2" Style="{StaticResource StatPill}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Tag"/>
                        <StackPanel>
                            <TextBlock Text="{Binding MarkupEditor, Converter={StaticResource MarkupPctToBadgeConverter}}"
                                       Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <TextBlock Text="наценка" Opacity="0.6" FontSize="12"/>
                        </StackPanel>
                    </StackPanel>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="{Binding MarkupEditor, Converter={StaticResource MarkupPctToTooltipConverter}}"/>
                    </ToolTipService.ToolTip>
                </Border>

                <!-- Тип бренда -->
                <Border Grid.Column="3" Style="{StaticResource StatPill}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <SymbolIcon Symbol="Shop"/>
                        <StackPanel>
                            <TextBlock Text="{Binding BrandTypeDisplay}" Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                            <TextBlock Text="тип бренда" Opacity="0.6" FontSize="12"/>
                        </StackPanel>
                    </StackPanel>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="OEM — оригинальный производитель; Аналог — независимый производитель"/>
                    </ToolTipService.ToolTip>
                </Border>
            </Grid>
        </StackPanel>
    </Border>
</Page>